{% extends 'base.html' %}
{% load staticfiles %}


{% block title %}Список студентов{% endblock %}


{% block nav_class_students %}active{% endblock %}

{% block main %}
{% include "includes/inc_messages.html" %}

<!-- Register buttom ================================================== -->

    <div class="container">
      <a href="{% url 'student_add' %}" class="btn btn-primary" role="button"><span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span> Регистрация нового студента</a>
    </div>

<!-- Students ================================================== -->

    <div class="container">
      <h1>Список студентов</h1>
    </div>

    <div class="container">
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>#</th>
              <th>Фамилия Имя</th>
              <th>Аватарка</th>
              <th>Адрес</th>
              <th>Skype</th>
              <th>Курсы</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          {% for student in object_list %}
          <tbody>
            <tr>
              <td>{{ forloop.counter0|add:page_obj.start_index }}</td>
              <td><a href="{% url 'student' pk=student.pk %}">{{ student.surname }} {{ student.name }}</a></td>
              <td><img src="{% if student.image %}{{ student.image.url }}{% else %}{% static 'img/No_image_available.svg' %}{% endif %}" height="100"></td>
              <td><a href="https://www.google.com.ua/maps/place/{{ student.address }}">{{ student.address }}</a></td>
              <td><a href="skype:{{ student.skype }}">{{ student.skype }}</a></td>
              <td>
              {% for course in student.course.all %}
                <p><a href="{% url 'courses:detail' course.pk %}">{{ course.name }}</a></p>
              {% endfor %}
              </td>
              <td><a href="{% url 'student_edit' pk=student.pk %}" class="btn btn-warning" role="button"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Редактировать</a></td>
              <td><a href="{% url 'student_remove' pk=student.pk %}" class="btn btn-danger" role="button"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Удалить</a></td>
            </tr>
          </tbody>
          {% endfor %}
        </table>
      </div>
      <nav>
        <ul class="pagination navbar-left">
        {% if page_obj.has_previous %}
          <li>
            <a href="{% url 'students' %}?{% if course_id %}course_id={{ course_id }}&{% endif %}page={{ page_obj.previous_page_number }}" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
        {% endif %}
        {% for page in paginator.page_range %}
          <li class="{% if page_obj.number == page %}active{% endif %}"><a href="{% url 'students' %}?{% if course_id %}course_id={{ course_id }}&{% endif %}page={{ page }}">{{ page }}</a></li>
        {% endfor %}
        {% if page_obj.has_next %}
          <li>
            <a href="{% url 'students' %}?{% if course_id %}course_id={{ course_id }}&{% endif %}page={{ page_obj.next_page_number }}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        {% endif %}
        </ul>
        <form class="navbar-form navbar-right" role="Search" action="{% url 'students' %}">
          <div class="form-group">
            {% if course_id %}<input type='hidden' name='course_id' value='{{ course_id }}'>{% endif %}
            <input type="text" class="form-control" name='page' placeholder="Номер страницы">
          </div>
          <button type="submit" class="btn btn-default">Переход</button>
        </form>
      </nav>
    </div>
{% endblock main %} 
