{% extends "base.html" %}

{% load static from staticfiles %}


{% block title %}Список студентов{% endblock %}


{% block nav_header %}Ooniversity > Студенты{% endblock %}


{% block nav_class_student %}active{% endblock %}


{% block main_content %}

<br>

{% include "includes/inc_messages.html" %}  {# Подключение сообщений #}


      <!-- Кнопка - Добавить нового студента -->
      <br>
      <div>
        <a class="add btn btn-success btn-md " href="{% url 'students:student-add' %}">
          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
          <big>Добавить нового студента</big>
        </a>
      </div>


      <!-- Students ! -->

      <br>
      <h2>Список студентов</h2>
      <br>

      <div class="panel panel-default">

        <!-- Table -->
        <table class="table">
          <thead>
            <tr>
              <th><h3>№</h3></th>
              <th><h3>Фамилия Имя</h3></th>
              <th><h3>Адрес</h3></th>
              <th><h3>Skype</h3></th>
              <th><h3>Курсы</h3></th>
            </tr>
          </thead>

          <tbody>
            {% for student in student_list %}
                <tr>
                  <td>
                    <h4>{{ forloop.counter }}</h4>
                  </td>

                  <td>
                    <a href="{% url 'students:student-info' student.id %}">
                      <h4>{{ student.surname|title }} {{ student.name|title }}</h4>
                    </a>
                  </td>

                  <td>
                    <h4>{{ student.address }}</h4>
                  </td>

                  <td>
                    <h4>{{ student.skype|lower }}</h4>
                  </td>

                  <td>
                    {% for stud_course in student.courses.all %}
                        <a href="{% url 'courses:course-coaches' stud_course.id %}">
                          <big>{{ stud_course.title }}</big>
                        </a>
                        <br>
                    {% endfor %}
                  </td>

                  <!-- Кнопка - Изменить -->
                  <td>
                    <a class="edit btn btn-primary btn-md" href="{% url 'students:student-edit' student.id %}">
                      <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                      Изменить
                    </a>
                  </td>

                  <!-- Кнопка - Удалить -->
                  <td>
                    <a class="del btn btn-danger btn-md" href="{% url 'students:student-del' student.id %}">
                      <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                      Удалить
                    </a>
                  </td>

                </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>


      <!-- Pagination students -->

      <br><br>

      <div class="pagination">
        <nav>
          <ul class="pagination">

            {% if page_obj.has_previous %}
                <li><a href="?page={{ page_obj.previous_page_number }}"><big>{{ '<<' }} previous</big></a></li>
            {% endif %}

            {% for num_page in paginator.page_range %}
                {% if num_page == page_obj.number %}
                    <li class="active"><a href="?page={{ num_page }}"><big><b> {{ num_page }} </b></big></a></li>
                {% else %}
                    <li><a href="?page={{ num_page }}"><big> {{ num_page }} </big></a></li>
                {% endif %}
            {% endfor %}

            {% if page_obj.has_next %}
                <li><a href="?page={{ page_obj.next_page_number }}"><big>next {{ '>>' }}</big></a></li>
            {% endif %}

          </ul>
        </nav>
      </div>


{% comment %}
      <!-- PRINT VALUES -->
      <div>
        <br>{{ paginator }}<br>
        {{ paginator.page_range }}<br>
      </div>
{% endcomment %}


{% endblock main_content %}
