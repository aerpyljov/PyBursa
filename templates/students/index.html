{% extends 'base.html' %}
{% load staticfiles %}


{% block title %} Студенты {% endblock title %}


{% block nav_class_students %}active{% endblock %}


{% block content %}

{% if messages %}
  {% for message in messages %}
  <div class="panel panel-success">
    <div class="panel-heading">
      <h3 class="panel-title">{{ message }}</h3>
    </div>
  </div>
  {% endfor %}
{% endif %}

  <form action="{% url 'students:add_student' %}">
  <button type="submit" class="btn btn-primary" value="Add">
    <span class="glyphicon glyphicon-plus"></span> Добавить студента
  </button>
  </form>
  {% if students_list %}
  <h2>Список студентов</h2>
  <table  class="table table-striped ">
    <thead>
      <tr>
       <th>#</th><th>Фамилия имя</th><th>Адрес</th><th>Skype</th><th>Курсы</th><th></th><th></th>
      </tr>
    </thead>
    <tbody>
    {% for student in students_list %}
      <tr>
       <td>{{ forloop.counter }}</td>
       <td><a href="{% url 'students:detail' student.id %}">{{ student.full_name }}</a></td>
       <td>{{ student.address|truncatechars:16 }}</td>
       <td>{{ student.skype }}</td>
       <td>{% for course in student.course.all %}
           <a href="{% url 'courses:detail' course.id %}">{{ course }}</a>
           <br/>{% endfor %}
       </td>
        <td>
          <form action="{% url 'students:edit_student' student.id %}">
            <button type="submit" class="btn btn-primary" value="Edit">
              <span class="glyphicon glyphicon-pencil"></span> Редактировать
            </button>
          </form>
        </td>
        <td>
          <form action="{% url 'students:delete_student' student.id %}">
            <button type="submit" class="btn btn-primary" value="Delete">
              <span class="glyphicon glyphicon-trash"></span> Удалить
            </button>
          </form>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>Нет студентов.</p>
  {% endif %}
{% endblock content %}
