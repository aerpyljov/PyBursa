{% extends "students/base.html" %}


{% block students_link %}{% url 'students:students' %}{% endblock %}


{% block page_header %}Список группы{% endblock %}


{% block page_content %}

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <div {% if message.tags %} class="alert alert-{{ message.tags }}"{% endif %} >
    {{ message }}
    </div>
    {% endfor %}
</ul>
{% endif %}

<div><a class="btn btn-primary active" href="{% url 'students:add_student' %}"" role="button><span class="glyphicon glyphicon-plus" aria-hidden="true">Добавить нового студента</span></a></div>
<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>#</th>
        <th>ФИО</th>
        <th>Адрес</th>
        <th>Skype</th>
        <th>Курсы</th>
      </tr>
    </thead>
    {% for student in students %}
    <tbody>
      <tr>
        <td>{{ forloop.counter }}</td>
        <td><a href="{% url 'students:student_d' student.id %}">{{ student.surname }} {{ student.name }}</a></td>
        <td>{{ student.address|default:"No address provided"|truncatechars:19 }}</td>
        <td>{{ student.skype }}</td>
        <td>{% for course in student.courses.all %}
        <a href="{% url 'courses:courses' course.id %}">{{ course }}</a></br>
        {% endfor %}</td>
        <td><a href="{% url 'students:edit_student' student.id %}">Изменить</a></td>
        <td><a href="{% url 'students:remove_student' student.id %}">Удалить</a></td>
      </tr>
    </tbody>
    {% endfor %}
  </table>
</div>

<div class="pagination">
  <span class="page-links">
      {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">< previous</a>
      {% endif %}

      {% for num in page_obj.paginator.page_range %}
          {% if num == page_obj.number %}
              <span class="current"><b>{{ num }}</b></span>
          {% else %}
              <a href="?page={{ num }}"> {{ num }}</a>
          {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}" aria-label="Next">next ></a>
     {% endif %}
  </span>
</div>

{% endblock page_content %}
