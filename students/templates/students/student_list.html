{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}Pybursa.Студенты{% endblock %}


{% block nav_active_students %}active{% endblock %}


{% block nav_st_detail %}{% endblock %}


{% block bodyhead %}{% endblock %}


{% block content %}
<h1>Список студентов</h1>
<p>
     <a href="{% url 'students:student_add' %}" class="btn btn-large btn-primary" type="button">Добавить студента</a>
</p>

{% if messages %}
<div class="alert alert-success">
    <ul class="messages">
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}
<div class="row">
	<div class="panel panel-primary">
		<div class="panel-heading">
			<h3 class="panel-title">Список слушателей</h3>
		</div>
		<table class="table">
			<thead>
				<tr >
					<th>#</th>
					<th>Фамилия Имя</th>
					<th>Адрес</th>
					<th>Skype</th>
					<th>Курсы</th>
                </tr>
			</thead>
			<tbody>
				<tr style="display: table-row;">
                {% for i in object_list %}
					<td>{{ i.id }}</td>
					<td><a href="{% url 'students:student_details' i.id %}">
                              {{ i.surname}} {{ i.name}}
                        </a></td>
					<td>{{ i.address }}</td>
					<td>{{ i.skype|default:"нет" }}</td>
					<td>
                       {% for k in i.courseset %}
                       <p><a href="{% url 'courses:lessons' k.id %}">{{ k.name }}</a></p>
                       {% endfor %}
                    </td>
                    <td>
                        <p>
                            <a href="{% url 'students:student_edit' i.id %}" class="btn btn-success btn-small btn-primary" type="button">ПРАВИТЬ</a>
                        </p>
                        <p>
                            <a href="{% url 'students:student_remove' i.id %}" class="btn btn-danger btn-small" type="button">УДАЛИТЬ</a>
                        </p>
                    </td>
				</tr>
                {% endfor %}
			</tbody>
		</table>
	</div>
</div>
<nav>
    <ul class="pagination">
    {% if page_obj.has_previous %}
        <li><a href="{% url 'students:students_list' %}?{% if course_id %}course_id={{ course_id }}&{% endif %}page={{ page_obj.previous_page_number }}">
            <span aria-hidden="true">PREV</span></a>
        </li>
    {% endif %}
    {% for page in paginator.page_range %}
         <li class="{% if page_obj.number == page %}active{% endif %}"><a href="{% url 'students:students_list' %}?{% if course_id %}course_id={{ course_id }}&{% endif %}page={{ page }}">{{ page }}</a></li>
    {% endfor %}
    {% if page_obj.has_next %}
         <li><a href="{% url 'students:students_list' %}?{% if course_id %}course_id={{ course_id }}&{% endif %}page={{ page_obj.next_page_number }}">
             <span aria-hidden="true">NEXT</span></a>
         </li>
    {% endif %}
    </ul>
</nav>
<div class="clear"></div>
{% endblock content %}