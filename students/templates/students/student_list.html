{% extends "base/base.html" %}

{% load staticfiles %}


{% block title %}
  Студенты
{% endblock %}


{% block menu_students %}active{% endblock menu_students %}


{% block main_content %}


{% if messages %}
    {% for message in messages %}
      <div class="alert alert-success" role="alert">{{ message }}</div>
    {% endfor %}
{% endif %}


        <a href="{% url 'students:add' %}" class="btn btn-primary btn-sm" role="button">
          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
          Добавить нового студента
        </a>

        <h4>
          Список студентов!
        </h4>

{% if student_list %}     
      <table class="table table-hover">

      <thead>
        <tr>
          <th>#</th>
          <th>фамилия имя</th>
          <th>адрес</th>
          <th>skype</th>
          <th>курсы</th>
        </tr>
      </thead>

      <tbody>

    {% for student in student_list %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td><a href="{% url 'students:detail' student.id %}">{{ student.name }} {{ student.surname }}</a></td>
          <td>{{ student.address }}</td>
          <td>{{ student.skype }}</td>
          <td>
              {% for c in student.courses.all %}
               <a href="{% url 'courses:detail' c.id %}">
                 {{ c }}
               </a>
              <br>
              {% endfor %}
         </td>
         <td>
           <a href="{% url 'students:edit' student.id %}" class="btn btn-primary btn-sm" role="button">
             <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
             Изменить
           </a>

           <a href="{% url 'students:remove' student.id %}" class="btn btn-primary btn-sm" role="button">
             <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
             Удалить
           </a>
         </td>
        </tr>
    {% endfor %}

      </tbody>
    </table>

    <div class="pagination">
      <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            
        </span>

        {% for page in page_obj.paginator.page_range %}
          {% if page = page_obj.number %}
            <a href="?page={{ page }}" class="btn btn-primary btn-sm">{{ page }}</a>
          {% else %}
            <a href="?page={{ page }}" class="btn btn-default btn-sm">{{ page }}</a>
          {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
        {% endif %}
      </span>
    </div>

{% else %}
    <p>No students are available.</p>
{% endif %}


{% endblock main_content %}

