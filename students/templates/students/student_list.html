{% extends "layout.html" %}

{% block section %}page-students{% endblock %}

{% block title %}
Students
{% endblock %}

{% block extra_menu %}
  <li>
    <a href="{% url 'students:student-add' %}">Новый студент</a>
  </li>
{% endblock %}

{% block content %}
<div class="course-info">

  <h2>Список студентов</h2>

  <div>
    <div class="students">
      <table class="table table-striped" style="width:100%">
      <thead>
        <tr>
          <th>№</th>
          <th>Фамилия Имя</th>
          <th>Адрес</th>
          <th>Skype</th>
          <th>Курсы</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for student in students %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td><a href="{% url 'students:student-detail' student.id %}">
              {{ student.surname}} {{ student.name}}
              </a>
          </td>
          <td>{{ student.address }}</td>
          <td>{{ student.skype }}</td>
          <td>{% for course in student.all_courses %}
            <a href="{% url 'courses:show' course.id %}">{{ course.title }}</a><br>
          {% endfor %}</td>
          <td>
            <a href="{% url 'students:student-edit' student.id %}">
              <span class="glyphicon glyphicon-pencil"></span>
            </a>
          </td>
          <td>
            <a href="{% url 'students:student-delete' student.id %}">
              <span class="glyphicon glyphicon-trash"></span>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
      </table>

    <nav>
      <ul class="pagination">
        <li>
          {% if page_obj.has_previous %}
            {% if request.GET.course_id %}           
              <a href="?page={{ page_obj.previous_page_number }}&course_id={{ request.GET.course_id }}"
                {% else %}   
                  <a href="?page={{ page_obj.previous_page_number }}"
            {% endif %}
                 aria-label="Previous">
                <span aria-hidden="true">&laquo; previous</span>
              </a>

          {% endif %}
        </li>

        {% for num in paginator.page_range %}
          {% if num == page_obj.number %}
            <li class="active">
          {% else %}
            <li>
          {% endif %}
            {% if request.GET.course_id %}
              <a href="?page={{ num }}&course_id={{ request.GET.course_id }}"
                {% else %}
                 <a href="?page={{ num }}"
            {% endif %}
              >{{ num }}</a>
            </li>
        {% endfor %}

        <li>
          {% if page_obj.has_next %}
            {% if request.GET.course_id %}
              <a href="?page={{ page_obj.next_page_number }}&course_id={{ request.GET.course_id }}"
              {% else %}
                <a href="?page={{ page_obj.next_page_number }}"
            {% endif %}
               aria-label="Next">
                <span aria-hidden="true">&raquo; next</span>
              </a>
          {% endif %}
        </li>
      </ul>
    </nav>


    </div>
  </div>
</div>

{% endblock %}