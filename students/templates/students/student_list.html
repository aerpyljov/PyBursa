{% extends "base_students.html" %}


{% block additional-info %}
{% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <div {% if message.tags %} class="alert alert-{{ message.tags }}"{% endif %}>
        {{ message }}
      </div>
    {% endfor %}
  </ul>
{% endif %}
<a class="btn btn-primary active" href="{% url 'students:add_student' %}" role="button">
<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
Добавить нового студента
</a>
{% endblock %}


{% block page-header %}Список студентов{% endblock %}


{% block page-content %} 
<thead>
  <tr>
    <th>№</th>
    <th>фамилия, имя</th>
    <th>адрес</th>
    <th>skype</th>
    <th>курсы</th>
  </tr>
</thead>
<tbody>
  {% csrf_token %}
  {% for student in student_list %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td><a href="{% url 'students:student' student.id %}">
            {{ student.surname }} {{ student.name }}
          </a>
      </td>
      <td>{{ student.address }}</td>
      <td>{{ student.skype }}</td>
      <td>
        {% for course in student.courses.all%}
          <a href="{% url 'courses:course_description' course.id %}">{{ course }}</a></br>
        {% endfor %}
      </td>
      <td>
         <a class="btn btn-primary active" 
            href="{% url 'students:edit_student' student.id %}" 
            role="button">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            Изменить
         </a>
      </td>
      <td>
         <a class="btn btn-primary active" 
            href="{% url 'students:remove_student' student.id %}" 
            role="button">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            Удалить
         </a>
      </td>
    </tr>
  {% endfor %} 
</tbody>
<nav>
  <ul class="pagination">
    <li>
      {% if page_obj.has_previous %}
      <a href="?course_id={{ course_id }}&page={{ page_obj.previous_page_number }}" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
      {% endif %}
    </li>
    {% for page in page_obj.paginator.page_range %}
      <li><a href="?course_id={{ course_id }}&page={{ page }}">{{ page }}</a></li>
    {% endfor %}
    <li>
      {% if page_obj.has_next %}
      <a href="?course_id={{ course_id }}&page={{ page_obj.next_page_number }}" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
      {% endif %}
    </li>
  </ul>
</nav>
{% endblock %}
