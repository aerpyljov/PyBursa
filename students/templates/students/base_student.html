{% extends "base.html" %}


{% block nav_class_students %}active{% endblock%}


{% block main_contant %}


{% block message %}{% endblock%} 

<div class="panel panel-default">
  <div class="panel-heading"><h3>Список студентов</h3></div>  
  <table class="table">     
    <tr>
      <th class="column05">#</th>        
      <th class="column20">Фамилия, Имя</th> 
      <th class="column30">Адрес</th> 
      <th class="column15">Скайп</th>
      <th class="column15">Курсы</th>
      <th></th> 
      <th></th>      
    </tr>
    {% for student in student_list %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td><a href="{% url 'students:detail' student.id%}">{{ student.surname }} {{ student.name }}</a></td>
      <td>{{ student.adress|truncatechars:32|default:"Не указан" }}</td>
      <td>{{ student.skype }}</td>
      <td>
      {% for course in student.courses.all %}
      <p><a href="{% url 'courses:course_info' course.id %}">{{ course.title }}</a></p>
      {% endfor %}
      </td>

      <td>
        <p><a class="btn btn-success" href="{% url 'students:edit' student.id%}" role="button">Изменить</a></p>  
      </td>
      <td>
        <p><a class="btn btn-danger" href="{% url 'students:remove' student.id%}" role="button">Удалить</a></p>  
      </td>

    </tr>    
    {% endfor %}
  </table>

  <div class="btn-toolbar" role="toolbar">
    <div class="btn-group" role="group">
      <div class="pagination">

        {% if page_obj.has_previous %}
          <a type="button" class="btn btn-default" href="?page={{ page_obj.previous_page_number }}">Предыдущая</a>
        {% endif %}

        {% for page in paginator.page_range %}

          {% if page == page_obj.number %}
          <a type="button" class="btn btn-primary" href="?page={{ page }}">{{ page }}</a>
          {% else %}
          <a type="button" class="btn btn-default" href="?page={{ page }}">{{ page }}</a>
          {% endif %}
        
        {% endfor %}

        {% if page_obj.has_next %}
          <a type="button" class="btn btn-default" href="?page={{ page_obj.next_page_number }}">Следующая</a>
        {% endif %} 
      </div>    
    </div>  
  </div>
  
</div>

{% endblock main_contant %}
     