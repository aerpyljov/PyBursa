{% extends "students/base.html" %}
{% load staticfiles %}

{% block title %}
  Mick Jagger
{% endblock %}

{% block content %}
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-1 main">
        <h1 class="page-header">Students</h1>

        <a href="{% url "students:list" %}">
          <i class="glyphicon glyphicon-chevron-left"></i>
          Back
        </a>

        <h2 class="sub-header">{{ student.user.first_name}} {{ student.user.last_name }}</h2>
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                  <th>Date of Birth</th>
                  <th>Address</th>
                  <th>Email</th>
                  <th>Skype</th>
                  <th>Average Score</th>
                  <th>Rating</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>{{ student.date_of_birth|date:'F j, Y' }}</td>
                <td>{{ student.address }}</td>
                <td><a href="mailto:{{ student.user.email }}">{{ student.user.email }}</a></td>
                <td>{{ student.skype }}</td>
                <td>{{ student.get_average_score }}</td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3 class="sub-header">Progress</h3>
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                  <th>Status</th>
                  <th>Task</th>
                  <th>Score</th>
              </tr>
            </thead>
            <tbody>
            {% for completed_task in student.completedtask_set.all %}
              <tr>
                <td>
                  {% if completed_task.was_finished_in_time %}
                    <i class="glyphicon glyphicon-ok"></i>
                  {% else %}
                    <i class="glyphicon glyphicon-fire deadline"></i>
                  {% endif %}
                </td>
                <td>{{ completed_task.task.title }}</td>
                <td>{{ completed_task.score }}</td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
